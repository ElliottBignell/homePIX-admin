package com.elliottbignell.homepix.innodb.innodb.homepix_csventry.generated;

import com.elliottbignell.homepix.innodb.innodb.homepix_csventry.HomePixCsventry;
import com.elliottbignell.homepix.innodb.innodb.homepix_csventry.HomePixCsventryEntityStoreSerializerImpl;
import com.elliottbignell.homepix.innodb.innodb.homepix_csventry.HomePixCsventryManager;
import com.speedment.common.annotation.GeneratedCode;
import com.speedment.common.tuple.Tuple2;
import com.speedment.common.tuple.Tuples;
import com.speedment.enterprise.datastore.runtime.entitystore.EntityStore;
import com.speedment.enterprise.datastore.runtime.entitystore.EntityStoreHolder;
import com.speedment.enterprise.datastore.runtime.fieldcache.FieldCache.OfByte;
import com.speedment.enterprise.datastore.runtime.fieldcache.FieldCache.OfInt;
import com.speedment.enterprise.datastore.runtime.fieldcache.FieldCache.OfString;
import com.speedment.enterprise.datastore.runtime.fieldcache.FieldCache;
import com.speedment.enterprise.datastore.runtime.fieldcache.MultiFieldCache;
import com.speedment.enterprise.datastore.runtime.statistic.Statistics;
import com.speedment.enterprise.datastore.runtime.util.DataStoreHolderUtil;
import com.speedment.enterprise.datastore.runtime.util.StatisticsUtil;
import com.speedment.runtime.bulk.PersistOperation;
import com.speedment.runtime.bulk.RemoveOperation;
import com.speedment.runtime.bulk.UpdateOperation;
import com.speedment.runtime.config.identifier.ColumnIdentifier;
import com.speedment.runtime.config.identifier.ColumnLabel;
import com.speedment.runtime.config.identifier.TableIdentifier;
import com.speedment.runtime.core.component.StreamSupplierComponent;
import com.speedment.runtime.field.Field;
import com.speedment.runtime.field.trait.HasIdentifier;

import java.util.Arrays;
import java.util.Collections;
import java.util.Map;
import java.util.Set;
import java.util.concurrent.CompletableFuture;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.stream.Stream;

import static java.util.Objects.requireNonNull;
import static java.util.stream.Collectors.toMap;
import static java.util.stream.Collectors.toSet;

/**
 * A holder class for the various caches that are used to speed up the {@link
 * HomePixCsventryManager}.
 * 
 * Generated by
 * com.speedment.enterprise.datastore.generator.internal.code.GeneratedEntityCacheHolderTranslator
 * <p>
 * This file has been automatically generated by Speedment. Any changes made to
 * it will be overwritten.
 * 
 * @author Speedment
 */
@GeneratedCode("Speedment")
public final class GeneratedHomePixCsventryCacheHolder implements EntityStoreHolder<HomePixCsventry> {
    
    private final EntityStore<HomePixCsventry> entityStore;
    private final OfInt fieldIdCache;
    private final OfString fieldFilenameCache;
    private final OfString fieldImageRefCache;
    private final OfString fieldCaptionCache;
    private final OfString fieldTagsCache;
    private final OfString fieldLicenseTypeCache;
    private final OfString fieldUserNameCache;
    private final OfString fieldSuperTagsCache;
    private final OfString fieldLocationCache;
    private final OfByte fieldNumberOfPeopleCache;
    private final OfString fieldModelReleaseCache;
    private final OfString fieldIsTherePropertyCache;
    private final OfString fieldPropertyReleaseCache;
    private final OfString fieldPrimaryCategoryCache;
    private final OfString fieldSecondaryCategoryCache;
    private final OfString fieldImageTypeCache;
    private final OfString fieldExclusiveToAlamyCache;
    private final OfString fieldAdditionalInfoCache;
    private final OfString fieldStatusCache;
    private final OfString fieldDateTakenCache;
    
    public GeneratedHomePixCsventryCacheHolder(
            EntityStore<HomePixCsventry> entityStore,
            OfInt fieldIdCache,
            OfString fieldFilenameCache,
            OfString fieldImageRefCache,
            OfString fieldCaptionCache,
            OfString fieldTagsCache,
            OfString fieldLicenseTypeCache,
            OfString fieldUserNameCache,
            OfString fieldSuperTagsCache,
            OfString fieldLocationCache,
            OfByte fieldNumberOfPeopleCache,
            OfString fieldModelReleaseCache,
            OfString fieldIsTherePropertyCache,
            OfString fieldPropertyReleaseCache,
            OfString fieldPrimaryCategoryCache,
            OfString fieldSecondaryCategoryCache,
            OfString fieldImageTypeCache,
            OfString fieldExclusiveToAlamyCache,
            OfString fieldAdditionalInfoCache,
            OfString fieldStatusCache,
            OfString fieldDateTakenCache) {
        
        this.entityStore                 = requireNonNull(entityStore);
        this.fieldIdCache                = requireNonNull(fieldIdCache);
        this.fieldFilenameCache          = requireNonNull(fieldFilenameCache);
        this.fieldImageRefCache          = requireNonNull(fieldImageRefCache);
        this.fieldCaptionCache           = requireNonNull(fieldCaptionCache);
        this.fieldTagsCache              = requireNonNull(fieldTagsCache);
        this.fieldLicenseTypeCache       = requireNonNull(fieldLicenseTypeCache);
        this.fieldUserNameCache          = requireNonNull(fieldUserNameCache);
        this.fieldSuperTagsCache         = requireNonNull(fieldSuperTagsCache);
        this.fieldLocationCache          = requireNonNull(fieldLocationCache);
        this.fieldNumberOfPeopleCache    = requireNonNull(fieldNumberOfPeopleCache);
        this.fieldModelReleaseCache      = requireNonNull(fieldModelReleaseCache);
        this.fieldIsTherePropertyCache   = requireNonNull(fieldIsTherePropertyCache);
        this.fieldPropertyReleaseCache   = requireNonNull(fieldPropertyReleaseCache);
        this.fieldPrimaryCategoryCache   = requireNonNull(fieldPrimaryCategoryCache);
        this.fieldSecondaryCategoryCache = requireNonNull(fieldSecondaryCategoryCache);
        this.fieldImageTypeCache         = requireNonNull(fieldImageTypeCache);
        this.fieldExclusiveToAlamyCache  = requireNonNull(fieldExclusiveToAlamyCache);
        this.fieldAdditionalInfoCache    = requireNonNull(fieldAdditionalInfoCache);
        this.fieldStatusCache            = requireNonNull(fieldStatusCache);
        this.fieldDateTakenCache         = requireNonNull(fieldDateTakenCache);
    }
    
    @Override
    public EntityStore<HomePixCsventry> getEntityStore() {
        return entityStore;
    }
    
    @Override
    @SuppressWarnings("unchecked")
    public <CACHE extends FieldCache<CACHE>> CACHE getFieldCache(ColumnIdentifier<HomePixCsventry> columnId) {
        if (columnId instanceof HomePixCsventry.Identifier) {
            final HomePixCsventry.Identifier _id = (HomePixCsventry.Identifier) columnId;
            switch (_id) {
                case ID                 : return (CACHE) fieldIdCache;
                case FILENAME           : return (CACHE) fieldFilenameCache;
                case IMAGE_REF          : return (CACHE) fieldImageRefCache;
                case CAPTION            : return (CACHE) fieldCaptionCache;
                case TAGS               : return (CACHE) fieldTagsCache;
                case LICENSE_TYPE       : return (CACHE) fieldLicenseTypeCache;
                case USER_NAME          : return (CACHE) fieldUserNameCache;
                case SUPER_TAGS         : return (CACHE) fieldSuperTagsCache;
                case LOCATION           : return (CACHE) fieldLocationCache;
                case NUMBER_OF_PEOPLE   : return (CACHE) fieldNumberOfPeopleCache;
                case MODEL_RELEASE      : return (CACHE) fieldModelReleaseCache;
                case IS_THERE_PROPERTY  : return (CACHE) fieldIsTherePropertyCache;
                case PROPERTY_RELEASE   : return (CACHE) fieldPropertyReleaseCache;
                case PRIMARY_CATEGORY   : return (CACHE) fieldPrimaryCategoryCache;
                case SECONDARY_CATEGORY : return (CACHE) fieldSecondaryCategoryCache;
                case IMAGE_TYPE         : return (CACHE) fieldImageTypeCache;
                case EXCLUSIVE_TO_ALAMY : return (CACHE) fieldExclusiveToAlamyCache;
                case ADDITIONAL_INFO    : return (CACHE) fieldAdditionalInfoCache;
                case STATUS             : return (CACHE) fieldStatusCache;
                case DATE_TAKEN         : return (CACHE) fieldDateTakenCache;
                default : {
                    throw new UnsupportedOperationException(
                        String.format("Unknown enum constant '%s'.", _id)
                    );
                }
            }
        } else {
            final String _colName = columnId.getColumnId();
            switch (_colName) {
                case "id"                : return (CACHE) fieldIdCache;
                case "filename"          : return (CACHE) fieldFilenameCache;
                case "imageRef"          : return (CACHE) fieldImageRefCache;
                case "caption"           : return (CACHE) fieldCaptionCache;
                case "tags"              : return (CACHE) fieldTagsCache;
                case "licenseType"       : return (CACHE) fieldLicenseTypeCache;
                case "userName"          : return (CACHE) fieldUserNameCache;
                case "superTags"         : return (CACHE) fieldSuperTagsCache;
                case "location"          : return (CACHE) fieldLocationCache;
                case "numberOfPeople"    : return (CACHE) fieldNumberOfPeopleCache;
                case "modelRelease"      : return (CACHE) fieldModelReleaseCache;
                case "isThereProperty"   : return (CACHE) fieldIsTherePropertyCache;
                case "propertyRelease"   : return (CACHE) fieldPropertyReleaseCache;
                case "primaryCategory"   : return (CACHE) fieldPrimaryCategoryCache;
                case "secondaryCategory" : return (CACHE) fieldSecondaryCategoryCache;
                case "imageType"         : return (CACHE) fieldImageTypeCache;
                case "exclusiveToAlamy"  : return (CACHE) fieldExclusiveToAlamyCache;
                case "additionalInfo"    : return (CACHE) fieldAdditionalInfoCache;
                case "status"            : return (CACHE) fieldStatusCache;
                case "dateTaken"         : return (CACHE) fieldDateTakenCache;
                default : {
                    throw new UnsupportedOperationException(
                        String.format("Unknown column name '%s'.", _colName)
                    );
                }
            }
        }
    }
    
    @Override
    public boolean isHavingMultiFieldCache(ColumnIdentifier<HomePixCsventry> columnId) {
        return false;
    }
    
    public static CompletableFuture<GeneratedHomePixCsventryCacheHolder> reload(StreamSupplierComponent streamSupplier, ExecutorService executor) {
        return reload(DataStoreHolderUtil.buildEntityStore(
            streamSupplier,
            executor,
            HomePixCsventryEntityStoreSerializerImpl::new,
            TableIdentifier.of("innodb", "innodb", "homePIX_csventry")
        ), executor);
    }
    
    @Override
    public EntityStoreHolder<HomePixCsventry> recycleAndPersist(PersistOperation<HomePixCsventry> persistOperation) {
        return wrapped().recycleAndPersist(persistOperation);
    }
    
    @Override
    public EntityStoreHolder<HomePixCsventry> recycleAndRemove(RemoveOperation<HomePixCsventry> removeOperation) {
        return wrapped().recycleAndRemove(removeOperation);
    }
    
    @Override
    public EntityStoreHolder<HomePixCsventry> recycleAndUpdate(UpdateOperation<HomePixCsventry> updateOperation) {
        return wrapped().recycleAndUpdate(updateOperation);
    }
    
    private EntityStoreHolder<HomePixCsventry> wrapped() {
        // Use explicit type for Stream to improve compilation time.
        final Map<ColumnLabel, FieldCache<?>> fieldCaches = Stream.<Tuple2<HasIdentifier<HomePixCsventry>, FieldCache<?>>>of(
            Tuples.of(HomePixCsventry.ID,                fieldIdCache),
            Tuples.of(HomePixCsventry.FILENAME,          fieldFilenameCache),
            Tuples.of(HomePixCsventry.IMAGE_REF,         fieldImageRefCache),
            Tuples.of(HomePixCsventry.CAPTION,           fieldCaptionCache),
            Tuples.of(HomePixCsventry.TAGS,              fieldTagsCache),
            Tuples.of(HomePixCsventry.LICENSE_TYPE,      fieldLicenseTypeCache),
            Tuples.of(HomePixCsventry.USER_NAME,         fieldUserNameCache),
            Tuples.of(HomePixCsventry.SUPER_TAGS,        fieldSuperTagsCache),
            Tuples.of(HomePixCsventry.LOCATION,          fieldLocationCache),
            Tuples.of(HomePixCsventry.NUMBER_OF_PEOPLE,  fieldNumberOfPeopleCache),
            Tuples.of(HomePixCsventry.MODEL_RELEASE,     fieldModelReleaseCache),
            Tuples.of(HomePixCsventry.IS_THERE_PROPERTY, fieldIsTherePropertyCache),
            Tuples.of(HomePixCsventry.PROPERTY_RELEASE,  fieldPropertyReleaseCache),
            Tuples.of(HomePixCsventry.PRIMARY_CATEGORY,  fieldPrimaryCategoryCache),
            Tuples.of(HomePixCsventry.SECONDARY_CATEGORY,fieldSecondaryCategoryCache),
            Tuples.of(HomePixCsventry.IMAGE_TYPE,        fieldImageTypeCache),
            Tuples.of(HomePixCsventry.EXCLUSIVE_TO_ALAMY,fieldExclusiveToAlamyCache),
            Tuples.of(HomePixCsventry.ADDITIONAL_INFO,   fieldAdditionalInfoCache),
            Tuples.of(HomePixCsventry.STATUS,            fieldStatusCache),
            Tuples.of(HomePixCsventry.DATE_TAKEN,        fieldDateTakenCache)
        )
            .collect(toMap(t2 -> t2.get0().identifier().label(), Tuple2::get1));
        final Map<ColumnLabel,  Map<ColumnLabel, MultiFieldCache<?, ?, ?>>>  multiFieldCaches = createMultiCacheMap();
        final Set<ColumnIdentifier<HomePixCsventry>> columnIdentifiers = Stream.<HasIdentifier<HomePixCsventry>>of(
            HomePixCsventry.ID,
            HomePixCsventry.FILENAME,
            HomePixCsventry.IMAGE_REF,
            HomePixCsventry.CAPTION,
            HomePixCsventry.TAGS,
            HomePixCsventry.LICENSE_TYPE,
            HomePixCsventry.USER_NAME,
            HomePixCsventry.SUPER_TAGS,
            HomePixCsventry.LOCATION,
            HomePixCsventry.NUMBER_OF_PEOPLE,
            HomePixCsventry.MODEL_RELEASE,
            HomePixCsventry.IS_THERE_PROPERTY,
            HomePixCsventry.PROPERTY_RELEASE,
            HomePixCsventry.PRIMARY_CATEGORY,
            HomePixCsventry.SECONDARY_CATEGORY,
            HomePixCsventry.IMAGE_TYPE,
            HomePixCsventry.EXCLUSIVE_TO_ALAMY,
            HomePixCsventry.ADDITIONAL_INFO,
            HomePixCsventry.STATUS,
            HomePixCsventry.DATE_TAKEN
        )
            .map(HasIdentifier::identifier)
            .collect(toSet());
        return EntityStoreHolder.of(
            entityStore,
            fieldCaches,
            multiFieldCaches,
            columnIdentifiers
        );
    }
    
    public static CompletableFuture<GeneratedHomePixCsventryCacheHolder> reload(CompletableFuture<EntityStore<HomePixCsventry>> entityStoreFuture, ExecutorService executor) {
        final CompletableFuture<FieldCache.OfInt> fieldIdCacheFuture =
            DataStoreHolderUtil.buildIntCache(entityStoreFuture, executor, HomePixCsventry.ID, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldFilenameCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.FILENAME, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldImageRefCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.IMAGE_REF, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldCaptionCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.CAPTION, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldTagsCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.TAGS, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldLicenseTypeCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.LICENSE_TYPE, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldUserNameCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.USER_NAME, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldSuperTagsCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.SUPER_TAGS, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldLocationCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.LOCATION, 0);
        
        final CompletableFuture<FieldCache.OfByte> fieldNumberOfPeopleCacheFuture =
            DataStoreHolderUtil.buildByteCache(entityStoreFuture, executor, HomePixCsventry.NUMBER_OF_PEOPLE, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldModelReleaseCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.MODEL_RELEASE, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldIsTherePropertyCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.IS_THERE_PROPERTY, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldPropertyReleaseCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.PROPERTY_RELEASE, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldPrimaryCategoryCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.PRIMARY_CATEGORY, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldSecondaryCategoryCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.SECONDARY_CATEGORY, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldImageTypeCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.IMAGE_TYPE, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldExclusiveToAlamyCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.EXCLUSIVE_TO_ALAMY, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldAdditionalInfoCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.ADDITIONAL_INFO, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldStatusCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.STATUS, 0);
        
        final CompletableFuture<FieldCache.OfString> fieldDateTakenCacheFuture =
            DataStoreHolderUtil.buildStringCache(entityStoreFuture, executor, HomePixCsventry.DATE_TAKEN, 0);
        
        return entityStoreFuture.thenApplyAsync(entityStore -> {
            try {
                return new GeneratedHomePixCsventryCacheHolder(
                    entityStore,
                    fieldIdCacheFuture.get(),
                    fieldFilenameCacheFuture.get(),
                    fieldImageRefCacheFuture.get(),
                    fieldCaptionCacheFuture.get(),
                    fieldTagsCacheFuture.get(),
                    fieldLicenseTypeCacheFuture.get(),
                    fieldUserNameCacheFuture.get(),
                    fieldSuperTagsCacheFuture.get(),
                    fieldLocationCacheFuture.get(),
                    fieldNumberOfPeopleCacheFuture.get(),
                    fieldModelReleaseCacheFuture.get(),
                    fieldIsTherePropertyCacheFuture.get(),
                    fieldPropertyReleaseCacheFuture.get(),
                    fieldPrimaryCategoryCacheFuture.get(),
                    fieldSecondaryCategoryCacheFuture.get(),
                    fieldImageTypeCacheFuture.get(),
                    fieldExclusiveToAlamyCacheFuture.get(),
                    fieldAdditionalInfoCacheFuture.get(),
                    fieldStatusCacheFuture.get(),
                    fieldDateTakenCacheFuture.get()
                );
            } catch (final ExecutionException | InterruptedException ex) {
                throw new RuntimeException(ex);
            }
        });
    }
    
    @Override
    public void close() {
        entityStore.close();
        fieldIdCache.close();
        fieldFilenameCache.close();
        fieldImageRefCache.close();
        fieldCaptionCache.close();
        fieldTagsCache.close();
        fieldLicenseTypeCache.close();
        fieldUserNameCache.close();
        fieldSuperTagsCache.close();
        fieldLocationCache.close();
        fieldNumberOfPeopleCache.close();
        fieldModelReleaseCache.close();
        fieldIsTherePropertyCache.close();
        fieldPropertyReleaseCache.close();
        fieldPrimaryCategoryCache.close();
        fieldSecondaryCategoryCache.close();
        fieldImageTypeCache.close();
        fieldExclusiveToAlamyCache.close();
        fieldAdditionalInfoCache.close();
        fieldStatusCache.close();
        fieldDateTakenCache.close();
    }
    
    @Override
    public Statistics getStatistics() {
        return StatisticsUtil.getStatistics(    
            this,
            entityStore.identifier(),
            Arrays.asList(
                HomePixCsventry.Identifier.ID,
                HomePixCsventry.Identifier.FILENAME,
                HomePixCsventry.Identifier.IMAGE_REF,
                HomePixCsventry.Identifier.CAPTION,
                HomePixCsventry.Identifier.TAGS,
                HomePixCsventry.Identifier.LICENSE_TYPE,
                HomePixCsventry.Identifier.USER_NAME,
                HomePixCsventry.Identifier.SUPER_TAGS,
                HomePixCsventry.Identifier.LOCATION,
                HomePixCsventry.Identifier.NUMBER_OF_PEOPLE,
                HomePixCsventry.Identifier.MODEL_RELEASE,
                HomePixCsventry.Identifier.IS_THERE_PROPERTY,
                HomePixCsventry.Identifier.PROPERTY_RELEASE,
                HomePixCsventry.Identifier.PRIMARY_CATEGORY,
                HomePixCsventry.Identifier.SECONDARY_CATEGORY,
                HomePixCsventry.Identifier.IMAGE_TYPE,
                HomePixCsventry.Identifier.EXCLUSIVE_TO_ALAMY,
                HomePixCsventry.Identifier.ADDITIONAL_INFO,
                HomePixCsventry.Identifier.STATUS,
                HomePixCsventry.Identifier.DATE_TAKEN
            )
        
        );
    }
    
    private Map<ColumnLabel, Map<ColumnLabel, MultiFieldCache<?, ?, ?>>> createMultiCacheMap() {
        return Collections.emptyMap();
    }
}